(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/king.c69f5f50.svg"},function(e,t,n){e.exports=n.p+"static/media/king_w.fef8c091.svg"},,,,,,,function(e,t,n){e.exports=n(32)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){"use strict";n.r(t);var a=n(11),o=n(15),r=n(0),l=n.n(r),i=n(12),s=n.n(i),c=(n(22),n(2)),u=n(3),h=n(6),b=n(4),d=n(1),m=n(5),p=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={user:""},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(d.a)(n)),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState({user:e.target.value,error:null})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.client.register(this.state.user).then(function(e){window.addEventListener("beforeunload",t.props.client.leave),"OK"===e&&t.setState({status:"looking"}),t.props.onRegister()}).catch(function(e){t.setState({error:e})})}},{key:"render",value:function(){return l.a.createElement("div",{id:"registration"},l.a.createElement("form",{class:"smallForm loginForm",onSubmit:this.handleSubmit},l.a.createElement("input",{type:"text",class:"inputText",value:this.state.value,onChange:this.handleChange,placeholder:"Player Name"}),this.state.error&&l.a.createElement("div",{class:"error"},this.state.error),l.a.createElement("input",{type:"submit",class:"boton",value:"Join Server"})))}}]),t}(l.a.Component),v=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={value:""},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.handleCreateLobby=n.handleCreateLobby.bind(Object(d.a)(n)),n.handleJoinLobby=n.handleJoinLobby.bind(Object(d.a)(n)),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleCreateLobby",value:function(e){this.props.onCreateLobby(this.state.value),e.preventDefault()}},{key:"handleJoinLobby",value:function(e){this.props.onJoinLobby(this.state.value),e.preventDefault()}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h2",null,"Lobby Browser"),l.a.createElement("div",{class:"smallForm"},l.a.createElement("input",{type:"text",class:"inputText",placeholder:"lobby name",value:this.state.value,onChange:this.handleChange}),l.a.createElement("button",{class:"boton",onClick:this.handleCreateLobby},"Create "),l.a.createElement("button",{class:"boton",onClick:this.handleJoinLobby},"Join ")))}}]),t}(l.a.Component);n(23);var f=n(8),y=n.n(f),g=n(9),C=n.n(g),E=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(h.a)(this,Object(b.a)(t).call(this,e))).client=n.props.client,n.state={players:n.props.lobbyInfo.players,creator:n.props.lobbyInfo.creator},n.chooseRolHandler=n.chooseRolHandler.bind(Object(d.a)(n)),n.startGameHandler=n.startGameHandler.bind(Object(d.a)(n)),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"chooseRolHandler",value:function(e){var t=this;this.client.chooseRol(e).then(function(e){var n=e.lobbyInfo.players;t.setState({players:n})})}},{key:"startGameHandler",value:function(){var e=this;this.client.startGame().then(function(t){e.props.onGameStart(t)})}},{key:"componentDidMount",value:function(){var e=this;this.client.addEventListener("LOBBY-UPDATE",function(t){var n=t.lobbyInfo;e.setState({players:n.players})}),this.client.addEventListener("GAME-START",function(t){e.props.onGameStart(t)})}},{key:"render",value:function(){var e=this.state.players.filter(function(e){return"b"===e.rol}).map(function(e){return l.a.createElement("h2",null,e.name)}),t=this.state.players.filter(function(e){return"w"===e.rol}).map(function(e){return l.a.createElement("h2",null,e.name)}),n=this.state.players.filter(function(e){return!e.rol}).map(function(e){return l.a.createElement("h2",null,e.name)});return l.a.createElement("div",{id:"lobby"},l.a.createElement("div",{class:"lobby-side"},l.a.createElement("img",{class:"lobby-piece",src:y.a,onClick:this.chooseRolHandler.bind(null,"b")}),l.a.createElement("div",{class:"lobby-player-list"},e)),l.a.createElement("div",{id:"lobby-middle"},this.props.IamCreator&&l.a.createElement("button",{id:"start-game",class:"boton",onClick:this.startGameHandler},"Start Game!"),l.a.createElement("div",{class:"lobby-player-list"},n)),l.a.createElement("div",{class:"lobby-side"},l.a.createElement("img",{class:"lobby-piece",src:C.a,onClick:this.chooseRolHandler.bind(null,"w")}),l.a.createElement("div",{class:"lobby-player-list"},t)))}}]),t}(l.a.Component),j=(n(24),{r:"\u265c",n:"\u265e",b:"\u265d",q:"\u265b",k:"\u265a",p:"\u265f"});var O=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(h.a)(this,Object(b.a)(t).call(this,e))).handleCheckMoves=n.handleCheckMoves.bind(Object(d.a)(n)),n.handleMove=n.handleMove.bind(Object(d.a)(n)),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleCheckMoves",value:function(e){this.props.onCheckMoves(e)}},{key:"handleMove",value:function(e){this.props.onMove(e)}},{key:"render",value:function(){for(var e=this,t=new Array(64),n=0;n<8;n++)for(var a=0;a<8;a++){var o="cell "+((a%2+n%2)%2?"cellWhite":"cellBlack");t[8*n+a]=l.a.createElement("div",{class:o,style:{gridColumn:"".concat(a+1,"/").concat(a+1),gridRow:"".concat(n+1,"/").concat(n+1)}})}var r=this.props.pieces.map(function(t){var n=t.square.charCodeAt(0)-"a".charCodeAt(0)+1,a="9".charCodeAt(0)-t.square.charCodeAt(1),o="b"===t.piece.color?"blackPiece":"whitePiece";return l.a.createElement("div",{class:o,style:{gridColumn:"".concat(n,"/").concat(n),gridRow:"".concat(a,"/").concat(a)},onClick:e.handleCheckMoves.bind(null,{square:t.square,verbose:!0})},j[t.piece.type])}),i=null;return this.props.moves&&(i=this.props.moves.map(function(t){var n,a={column:(n=t.to).charCodeAt(0)-"a".charCodeAt(0)+1,row:"9".charCodeAt(0)-n.charCodeAt(1)};return l.a.createElement("div",{class:"move",style:{zIndex:100,gridColumn:"".concat(a.column,"/").concat(a.column),gridRow:"".concat(a.row,"/").concat(a.row)},onClick:e.handleMove.bind(null,t.to),key:"move-".concat(t.to)})})),l.a.createElement("div",{class:"chessBoard"},t,r,null!==i&&i)}}]),t}(l.a.Component),k=(n(25),function(e){function t(e){return Object(c.a)(this,t),Object(h.a)(this,Object(b.a)(t).call(this,e))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{id:"gameinfo"},l.a.createElement("img",{src:y.a,id:"gameinfo-piece1"}),l.a.createElement("img",{src:C.a,id:"gameinfo-piece2"}),l.a.createElement("h2",{id:"gameinfo-player1"},this.props.p1),l.a.createElement("h2",{id:"gameinfo-player2"},this.props.p2),l.a.createElement("div",{class:"turn",id:"turn-".concat(this.props.turn)}))}}]),t}(l.a.Component)),S=(n(26),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(h.a)(this,Object(b.a)(t).call(this,e))).client=n.props.client,n.state={gameState:n.props.gameInfo.gameState,moves:null,turn:n.props.gameInfo.turn},n.handleMove=n.handleMove.bind(Object(d.a)(n)),n.handleCheckMoves=n.handleCheckMoves.bind(Object(d.a)(n)),console.log("gameInfo",n.props.gameInfo,"lobbyInfo",n.props.lobbyInfo),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleMove",value:function(e){var t=this;console.log("voy a mover",e,this.state.selected),this.client.move({from:this.state.selected.square,to:e}).then(function(e){var n=e.gameInfo;t.setState({gameState:n.gameState,moves:null,selected:null,turn:n.turn})})}},{key:"handleCheckMoves",value:function(e){console.log("voy a chequear",e);var t=this.client.moves(e).moves;this.setState({moves:t,selected:e})}},{key:"componentDidMount",value:function(){var e=this;this.client.addEventListener("MOVE",function(t){var n=t.gameInfo;e.setState({gameState:n.gameState,moves:null,selected:null,turn:n.turn})})}},{key:"render",value:function(){var e=this.props.lobbyInfo.players.find(function(e){return"b"===e.rol}).name,t=this.props.lobbyInfo.players.find(function(e){return"w"===e.rol}).name;return console.log(this.state,"asdasdasdasd-------"),l.a.createElement("div",{id:"gameRoom"},l.a.createElement("div",{id:"boardContainer"},l.a.createElement(O,{pieces:this.state.gameState,moves:this.state.moves,onCheckMoves:this.handleCheckMoves,onMove:this.handleMove})),l.a.createElement("div",{id:"infoContainer"},l.a.createElement(k,{p1:e,p2:t,turn:this.state.turn})))}}]),t}(l.a.Component)),I=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={value:"",status:"registering"},n.handleRegister=n.handleRegister.bind(Object(d.a)(n)),n.handleCreateLobby=n.handleCreateLobby.bind(Object(d.a)(n)),n.handleJoinLobby=n.handleJoinLobby.bind(Object(d.a)(n)),n.handleGameStart=n.handleGameStart.bind(Object(d.a)(n)),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleRegister",value:function(){this.setState({status:"looking"})}},{key:"handleCreateLobby",value:function(e){var t=this;this.props.client.createLobby(e).then(function(n){var a=n.lobbyInfo;t.setState({status:"hosting",lobbyName:e,lobbyInfo:a})}).catch(function(){})}},{key:"handleJoinLobby",value:function(e){var t=this;this.props.client.joinLobby(e).then(function(n){var a=n.lobbyInfo;t.setState({status:"joined",lobbyName:e,lobbyInfo:a})}).catch(function(){})}},{key:"handleGameStart",value:function(e){var t=e.lobbyInfo,n=e.gameInfo;this.setState({status:"playing",lobbyInfo:t,gameInfo:n})}},{key:"render",value:function(){switch(this.state.status){case"registering":return l.a.createElement(p,{client:this.props.client,onRegister:this.handleRegister});case"looking":return l.a.createElement(v,{onCreateLobby:this.handleCreateLobby,onJoinLobby:this.handleJoinLobby});case"hosting":return l.a.createElement(E,{onGameStart:this.handleGameStart,IamCreator:!0,client:this.props.client,name:this.state.lobbyName,lobbyInfo:this.state.lobbyInfo});case"joined":return l.a.createElement(E,{onGameStart:this.handleGameStart,IamCreator:!1,client:this.props.client,name:this.state.lobbyName,lobbyInfo:this.state.lobbyInfo});case"playing":return l.a.createElement(S,{client:this.props.client,lobbyInfo:this.state.lobbyInfo,gameInfo:this.state.gameInfo});default:return l.a.createElement("div",null,l.a.createElement("p",null,"Algo se rompio"))}}}]),t}(l.a.Component),L=n(13),w=n.n(L),M=n(14),R=new Proxy(n.n(M).a,{construct:function(e,t){var n=Object(a.a)(e,Object(o.a)(t));return n.state=function(){return n.SQUARES.map(function(e){return{square:e,piece:n.get(e)}}).filter(function(e){return null!==e.piece})},n}}),G=w()({url:"wss://umpire-chess.herokuapp.com/",WSConstructor:WebSocket,Game:R});s.a.render(l.a.createElement(I,{client:G}),document.getElementById("root"))}],[[16,1,2]]]);
//# sourceMappingURL=main.9d9de966.chunk.js.map