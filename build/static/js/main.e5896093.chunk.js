(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n.p+"static/media/king.c69f5f50.svg"},12:function(e,t,n){e.exports=n.p+"static/media/king_w.fef8c091.svg"},16:function(e,t,n){e.exports=n(31)},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var a=n(9),o=n(15),l=n(0),r=n.n(l),i=n(10),c=n.n(i),s=(n(22),n(2)),u=n(3),h=n(6),b=n(4),d=n(1),m=n(5),v=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={value:""},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(d.a)(n)),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){this.props.onRegister(this.state.value),e.preventDefault()}},{key:"render",value:function(){return r.a.createElement("div",{id:"registration"},r.a.createElement("form",{class:"smallForm loginForm",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",class:"inputText",value:this.state.value,onChange:this.handleChange,placeholder:"Player Name"}),r.a.createElement("input",{type:"submit",class:"boton",value:"Join Server"})))}}]),t}(r.a.Component),p=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={value:""},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.handleCreateLobby=n.handleCreateLobby.bind(Object(d.a)(n)),n.handleJoinLobby=n.handleJoinLobby.bind(Object(d.a)(n)),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleCreateLobby",value:function(e){this.props.onCreateLobby(this.state.value),e.preventDefault()}},{key:"handleJoinLobby",value:function(e){this.props.onJoinLobby(this.state.value),e.preventDefault()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Lobby Browser"),r.a.createElement("div",{class:"smallForm"},r.a.createElement("input",{type:"text",class:"inputText",placeholder:"lobby name",value:this.state.value,onChange:this.handleChange}),r.a.createElement("button",{class:"boton",onClick:this.handleCreateLobby},"Create "),r.a.createElement("button",{class:"boton",onClick:this.handleJoinLobby},"Join ")))}}]),t}(r.a.Component);n(23);var f=n(11),y=n.n(f),g=n(12),C=n.n(g),k=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(h.a)(this,Object(b.a)(t).call(this,e))).client=n.props.client,n.state={players:n.props.lobbyInfo.players,creator:n.props.lobbyInfo.creator},n.chooseRolHandler=n.chooseRolHandler.bind(Object(d.a)(n)),n.startGameHandler=n.startGameHandler.bind(Object(d.a)(n)),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"chooseRolHandler",value:function(e){var t=this;this.client.chooseRol(e).then(function(e){var n=e.lobbyInfo.players;t.setState({players:n})})}},{key:"startGameHandler",value:function(){var e=this;this.client.startGame().then(function(t){e.props.onGameStart(t)})}},{key:"componentDidMount",value:function(){var e=this;this.client.addEventListener("LOBBY-UPDATE",function(t){var n=t.lobbyInfo;e.setState({players:n.players})}),this.client.addEventListener("GAME-START",function(t){e.props.onGameStart(t)})}},{key:"render",value:function(){var e=this.state.players.filter(function(e){return"b"===e.rol}).map(function(e){return r.a.createElement("h2",null,e.name)}),t=this.state.players.filter(function(e){return"w"===e.rol}).map(function(e){return r.a.createElement("h2",null,e.name)}),n=this.state.players.filter(function(e){return!e.rol}).map(function(e){return r.a.createElement("h2",null,e.name)});return r.a.createElement("div",{id:"lobby"},r.a.createElement("div",{class:"lobby-side"},r.a.createElement("img",{class:"lobby-piece",src:y.a,onClick:this.chooseRolHandler.bind(null,"b")}),r.a.createElement("div",{style:{gridArea:"players"}},e)),r.a.createElement("div",{id:"lobby-middle"},this.props.IamCreator&&r.a.createElement("button",{id:"start-game",class:"boton",onClick:this.startGameHandler},"Start Game!"),r.a.createElement("div",{id:"lobby-spectate-list"},n)),r.a.createElement("div",{class:"lobby-side"},r.a.createElement("img",{class:"lobby-piece",src:C.a,onClick:this.chooseRolHandler.bind(null,"w")}),r.a.createElement("div",{style:{gridArea:"players"}},t)))}}]),t}(r.a.Component),j=(n(24),{r:"\u265c",n:"\u265e",b:"\u265d",q:"\u265b",k:"\u265a",p:"\u265f"});var O=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(h.a)(this,Object(b.a)(t).call(this,e))).handleCheckMoves=n.handleCheckMoves.bind(Object(d.a)(n)),n.handleMove=n.handleMove.bind(Object(d.a)(n)),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleCheckMoves",value:function(e){this.props.onCheckMoves(e)}},{key:"handleMove",value:function(e){this.props.onMove(e)}},{key:"render",value:function(){for(var e=this,t=new Array(64),n=0;n<8;n++)for(var a=0;a<8;a++){var o="cell "+((a%2+n%2)%2?"cellWhite":"cellBlack");t[8*n+a]=r.a.createElement("div",{class:o,style:{gridColumn:"".concat(a+1,"/").concat(a+1),gridRow:"".concat(n+1,"/").concat(n+1)}})}var l=this.props.pieces.map(function(t){var n=t.square.charCodeAt(0)-"a".charCodeAt(0)+1,a="9".charCodeAt(0)-t.square.charCodeAt(1),o="b"===t.piece.color?"blackPiece":"whitePiece";return r.a.createElement("div",{class:o,style:{gridColumn:"".concat(n,"/").concat(n),gridRow:"".concat(a,"/").concat(a)},onClick:e.handleCheckMoves.bind(null,{square:t.square,verbose:!0})},j[t.piece.type])}),i=null;return this.props.moves&&(i=this.props.moves.map(function(t){var n,a={column:(n=t.to).charCodeAt(0)-"a".charCodeAt(0)+1,row:"9".charCodeAt(0)-n.charCodeAt(1)};return r.a.createElement("div",{class:"move",style:{zIndex:100,gridColumn:"".concat(a.column,"/").concat(a.column),gridRow:"".concat(a.row,"/").concat(a.row)},onClick:e.handleMove.bind(null,t.to),key:"move-".concat(t.to)})})),r.a.createElement("div",{class:"chessBoard"},t,l,null!==i&&i)}}]),t}(r.a.Component),E=(n(25),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(h.a)(this,Object(b.a)(t).call(this,e))).client=n.props.client,n.state={gameState:n.props.gameInfo.gameState,moves:null},n.handleMove=n.handleMove.bind(Object(d.a)(n)),n.handleCheckMoves=n.handleCheckMoves.bind(Object(d.a)(n)),console.log("gameInfo",n.props.gameInfo,"lobbyInfo",n.props.lobbyInfo),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleMove",value:function(e){var t=this;console.log("voy a mover",e,this.state.selected),this.client.move({from:this.state.selected.square,to:e}).then(function(e){var n=e.gameInfo;t.setState({gameState:n.gameState,moves:null,selected:null})})}},{key:"handleCheckMoves",value:function(e){console.log("voy a chequear",e);var t=this.client.moves(e).moves;this.setState({moves:t,selected:e})}},{key:"componentDidMount",value:function(){var e=this;this.client.addEventListener("MOVE",function(t){var n=t.gameInfo;e.setState({gameState:n.gameState,moves:null,selected:null})})}},{key:"render",value:function(){return r.a.createElement("div",{id:"gameRoom"},r.a.createElement("div",{id:"boardContainer"},r.a.createElement(O,{pieces:this.state.gameState,moves:this.state.moves,onCheckMoves:this.handleCheckMoves,onMove:this.handleMove})),r.a.createElement("div",{id:"infoContainer"}))}}]),t}(r.a.Component)),S=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={value:"",status:"registering"},n.handleRegister=n.handleRegister.bind(Object(d.a)(n)),n.handleCreateLobby=n.handleCreateLobby.bind(Object(d.a)(n)),n.handleJoinLobby=n.handleJoinLobby.bind(Object(d.a)(n)),n.handleGameStart=n.handleGameStart.bind(Object(d.a)(n)),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleRegister",value:function(e){var t=this;this.props.client.register(e).then(function(e){window.addEventListener("beforeunload",t.props.client.leave),"OK"===e&&t.setState({status:"looking"})}).catch(function(){})}},{key:"handleCreateLobby",value:function(e){var t=this;this.props.client.createLobby(e).then(function(n){var a=n.lobbyInfo;t.setState({status:"hosting",lobbyName:e,lobbyInfo:a})}).catch(function(){})}},{key:"handleJoinLobby",value:function(e){var t=this;this.props.client.joinLobby(e).then(function(n){var a=n.lobbyInfo;t.setState({status:"joined",lobbyName:e,lobbyInfo:a})}).catch(function(){})}},{key:"handleGameStart",value:function(e){var t=e.lobbyInfo,n=e.gameInfo;this.setState({status:"playing",lobbyInfo:t,gameInfo:n})}},{key:"render",value:function(){switch(this.state.status){case"registering":return r.a.createElement(v,{onRegister:this.handleRegister});case"looking":return r.a.createElement(p,{onCreateLobby:this.handleCreateLobby,onJoinLobby:this.handleJoinLobby});case"hosting":return r.a.createElement(k,{onGameStart:this.handleGameStart,IamCreator:!0,client:this.props.client,name:this.state.lobbyName,lobbyInfo:this.state.lobbyInfo});case"joined":return r.a.createElement(k,{onGameStart:this.handleGameStart,IamCreator:!1,client:this.props.client,name:this.state.lobbyName,lobbyInfo:this.state.lobbyInfo});case"playing":return r.a.createElement(E,{client:this.props.client,lobbyInfo:this.state.lobbyInfo,gameInfo:this.state.gameInfo});default:return r.a.createElement("div",null,r.a.createElement("p",null,"Algo se rompio"))}}}]),t}(r.a.Component),I=n(13),L=n.n(I),M=n(14),w=new Proxy(n.n(M).a,{construct:function(e,t){var n=Object(a.a)(e,Object(o.a)(t));return n.state=function(){return n.SQUARES.map(function(e){return{square:e,piece:n.get(e)}}).filter(function(e){return null!==e.piece})},n}}),R=L()({url:"wss://umpire-chess.herokuapp.com/",WSConstructor:WebSocket,Game:w});c.a.render(r.a.createElement(S,{client:R}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.e5896093.chunk.js.map