(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){e.exports=a(27)},20:function(e,t,a){},21:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var n=a(9),o=a(13),l=a(0),r=a.n(l),c=a(10),s=a.n(c),i=(a(20),a(2)),u=a(3),h=a(6),b=a(4),d=a(1),m=a(5),v=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={value:""},a.handleChange=a.handleChange.bind(Object(d.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){this.props.onRegister(this.state.value),e.preventDefault()}},{key:"render",value:function(){return r.a.createElement("form",{class:"smallForm loginForm",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",class:"inputText",value:this.state.value,onChange:this.handleChange,placeholder:"Player Name"}),r.a.createElement("input",{type:"submit",class:"boton",value:"Join Server"}))}}]),t}(r.a.Component),p=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={value:""},a.handleChange=a.handleChange.bind(Object(d.a)(a)),a.handleCreateLobby=a.handleCreateLobby.bind(Object(d.a)(a)),a.handleJoinLobby=a.handleJoinLobby.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleCreateLobby",value:function(e){this.props.onCreateLobby(this.state.value),e.preventDefault()}},{key:"handleJoinLobby",value:function(e){this.props.onJoinLobby(this.state.value),e.preventDefault()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Lobby Browser"),r.a.createElement("div",{class:"smallForm"},r.a.createElement("input",{type:"text",class:"inputText",placeholder:"lobby name",value:this.state.value,onChange:this.handleChange}),r.a.createElement("button",{class:"boton",onClick:this.handleCreateLobby},"Create "),r.a.createElement("button",{class:"boton",onClick:this.handleJoinLobby},"Join ")))}}]),t}(r.a.Component);var y=function(e){var t;return t="w"===e.rol?"Whites":"b"===e.rol?"Blacks":"--",r.a.createElement("div",null,r.a.createElement("p",null,"Name: ",e.name),e.me?r.a.createElement("select",{onChange:e.onChooseRol},r.a.createElement("option",{value:"default"},"--"),r.a.createElement("option",{value:"w"},"Whites"),r.a.createElement("option",{value:"b"},"Blacks")):r.a.createElement("p",null,"Rol: ",t))};var f=function(e){var t=e.players.map(function(t){return r.a.createElement(y,{key:t.name,name:t.name,rol:t.rol,me:t.me,onChooseRol:e.onChooseRol})});return r.a.createElement("div",null,t)},C=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).client=a.props.client,a.state={players:a.props.lobbyInfo.players,creator:a.props.lobbyInfo.creator},a.chooseRolHandler=a.chooseRolHandler.bind(Object(d.a)(a)),a.startGameHandler=a.startGameHandler.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"chooseRolHandler",value:function(e){var t=this;this.client.chooseRol(e.target.value).then(function(e){var a=e.players;t.setState({players:a})})}},{key:"startGameHandler",value:function(){var e=this;this.client.startGame().then(function(t){e.props.onGameStart(t)})}},{key:"componentDidMount",value:function(){var e=this;this.client.addEventListener("LOBBY-UPDATE",function(t){e.setState({players:t.players})}),this.client.addEventListener("GAME-START",function(t){e.props.onGameStart(t)})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Estas en el lobby: - ",this.props.name,"!"),r.a.createElement(f,{players:this.state.players,onChooseRol:this.chooseRolHandler}),this.props.IamCreator&&r.a.createElement("button",{onClick:this.startGameHandler},"Start Game!"))}}]),t}(r.a.Component),g=(a(21),{r:"\u265c",n:"\u265e",b:"\u265d",q:"\u265b",k:"\u265a",p:"\u265f"});var k=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).handleCheckMoves=a.handleCheckMoves.bind(Object(d.a)(a)),a.handleMove=a.handleMove.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleCheckMoves",value:function(e){this.props.onCheckMoves(e)}},{key:"handleMove",value:function(e){this.props.onMove(e)}},{key:"render",value:function(){for(var e=this,t=new Array(64),a=0;a<8;a++)for(var n=0;n<8;n++){var o="cell "+((n%2+a%2)%2?"cellWhite":"cellBlack");t[8*a+n]=r.a.createElement("div",{class:o,style:{gridColumn:"".concat(n+1,"/").concat(n+1),gridRow:"".concat(a+1,"/").concat(a+1)}})}var l=this.props.pieces.map(function(t){var a=t.square.charCodeAt(0)-"a".charCodeAt(0)+1,n="9".charCodeAt(0)-t.square.charCodeAt(1),o="b"===t.piece.color?"blackPiece":"whitePiece";return r.a.createElement("div",{class:o,style:{gridColumn:"".concat(a,"/").concat(a),gridRow:"".concat(n,"/").concat(n)},onClick:e.handleCheckMoves.bind(null,{square:t.square,verbose:!0})},g[t.piece.type])}),c=null;return this.props.moves&&(c=this.props.moves.map(function(t){var a,n={column:(a=t.to).charCodeAt(0)-"a".charCodeAt(0)+1,row:"9".charCodeAt(0)-a.charCodeAt(1)};return r.a.createElement("div",{class:"move",style:{zIndex:100,gridColumn:"".concat(n.column,"/").concat(n.column),gridRow:"".concat(n.row,"/").concat(n.row)},onClick:e.handleMove.bind(null,t.to),key:"move-".concat(t.to)})})),r.a.createElement("div",{class:"boardContainer"},r.a.createElement("div",{class:"chessBoard"},t,l,null!==c&&c))}}]),t}(r.a.Component),j=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).client=a.props.client,a.state={gameState:a.props.initialGameState,moves:null},a.handleMove=a.handleMove.bind(Object(d.a)(a)),a.handleCheckMoves=a.handleCheckMoves.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleMove",value:function(e){var t=this;console.log("voy a mover",e,this.state.selected),this.client.move({from:this.state.selected.square,to:e}).then(function(e){t.setState({gameState:e.gameState,moves:null,selected:null})})}},{key:"handleCheckMoves",value:function(e){console.log("voy a chequear",e);var t=this.client.moves(e);this.setState({moves:t,selected:e})}},{key:"componentDidMount",value:function(){var e=this;this.client.addEventListener("MOVE",function(t){e.setState({gameState:t.gameState,moves:null,selected:null})})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(k,{pieces:this.state.gameState,moves:this.state.moves,onCheckMoves:this.handleCheckMoves,onMove:this.handleMove}))}}]),t}(r.a.Component),O=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={value:"",status:"registering"},a.handleRegister=a.handleRegister.bind(Object(d.a)(a)),a.handleCreateLobby=a.handleCreateLobby.bind(Object(d.a)(a)),a.handleJoinLobby=a.handleJoinLobby.bind(Object(d.a)(a)),a.handleGameStart=a.handleGameStart.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleRegister",value:function(e){var t=this;this.props.client.register(e).then(function(e){window.addEventListener("beforeunload",t.props.client.leave),"OK"===e&&t.setState({status:"looking"})}).catch(function(){})}},{key:"handleCreateLobby",value:function(e){var t=this;this.props.client.createLobby(e).then(function(a){t.setState({status:"hosting",lobbyName:e,lobbyInfo:a})}).catch(function(){})}},{key:"handleJoinLobby",value:function(e){var t=this;this.props.client.joinLobby(e).then(function(a){t.setState({status:"joined",lobbyName:e,lobbyInfo:a})}).catch(function(){})}},{key:"handleGameStart",value:function(e){var t=e.lobbyInfo,a=e.gameInfo;this.setState({status:"playing",lobbyInfo:t,gameInfo:a})}},{key:"render",value:function(){switch(this.state.status){case"registering":return r.a.createElement(v,{onRegister:this.handleRegister});case"looking":return r.a.createElement(p,{onCreateLobby:this.handleCreateLobby,onJoinLobby:this.handleJoinLobby});case"hosting":return r.a.createElement(C,{onGameStart:this.handleGameStart,IamCreator:!0,client:this.props.client,name:this.state.lobbyName,lobbyInfo:this.state.lobbyInfo});case"joined":return r.a.createElement(C,{onGameStart:this.handleGameStart,IamCreator:!1,client:this.props.client,name:this.state.lobbyName,lobbyInfo:this.state.lobbyInfo});case"playing":return r.a.createElement(j,{client:this.props.client,players:this.state.lobbyInfo.players,initialGameState:this.state.gameInfo.gameState});default:return r.a.createElement("div",null,r.a.createElement("p",null,"Algo se rompio"))}}}]),t}(r.a.Component),E=a(11),S=a.n(E),L=a(12),M=new Proxy(a.n(L).a,{construct:function(e,t){var a=Object(n.a)(e,Object(o.a)(t));return a.state=function(){return a.SQUARES.map(function(e){return{square:e,piece:a.get(e)}}).filter(function(e){return null!==e.piece})},a}}),w=S()({url:"wss://umpire-chess.herokuapp.com/",WSConstructor:WebSocket,Game:M});s.a.render(r.a.createElement(O,{client:w}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.d4840013.chunk.js.map