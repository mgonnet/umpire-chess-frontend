(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){e.exports=a(27)},20:function(e,t,a){},21:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var n=a(9),l=a(13),o=a(0),r=a.n(o),i=a(10),c=a.n(i),s=(a(20),a(2)),u=a(3),h=a(6),b=a(4),m=a(1),d=a(5),p=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={value:""},a.handleChange=a.handleChange.bind(Object(m.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){this.props.onRegister(this.state.value),e.preventDefault()}},{key:"render",value:function(){return r.a.createElement("form",{class:"smallForm loginForm",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",class:"inputText",value:this.state.value,onChange:this.handleChange,placeholder:"Player Name"}),r.a.createElement("input",{type:"submit",class:"boton",value:"Join Server"}))}}]),t}(r.a.Component),v=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={value:""},a.handleChange=a.handleChange.bind(Object(m.a)(a)),a.handleCreateLobby=a.handleCreateLobby.bind(Object(m.a)(a)),a.handleJoinLobby=a.handleJoinLobby.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleCreateLobby",value:function(e){this.props.onCreateLobby(this.state.value),e.preventDefault()}},{key:"handleJoinLobby",value:function(e){this.props.onJoinLobby(this.state.value),e.preventDefault()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Lobby Browser"),r.a.createElement("div",{class:"smallForm"},r.a.createElement("input",{type:"text",class:"inputText",placeholder:"lobby name",value:this.state.value,onChange:this.handleChange}),r.a.createElement("button",{class:"boton",onClick:this.handleCreateLobby},"Create "),r.a.createElement("button",{class:"boton",onClick:this.handleJoinLobby},"Join ")))}}]),t}(r.a.Component);var y=function(e){var t;return t="w"===e.rol?"Whites":"b"===e.rol?"Blacks":"--",r.a.createElement("div",null,r.a.createElement("p",null,"Name: ",e.name),e.me?r.a.createElement("select",{onChange:e.onChooseRol},r.a.createElement("option",{value:"default"},"--"),r.a.createElement("option",{value:"w"},"Whites"),r.a.createElement("option",{value:"b"},"Blacks")):r.a.createElement("p",null,"Rol: ",t))};var f=function(e){var t=e.players.map(function(t){return r.a.createElement(y,{key:t.name,name:t.name,rol:t.rol,me:t.me,onChooseRol:e.onChooseRol})});return r.a.createElement("div",null,t)},g=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).client=a.props.client,a.state={players:a.props.lobbyInfo.players,creator:a.props.lobbyInfo.creator},a.chooseRolHandler=a.chooseRolHandler.bind(Object(m.a)(a)),a.startGameHandler=a.startGameHandler.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"chooseRolHandler",value:function(e){var t=this;this.client.chooseRol(e.target.value).then(function(e){var a=e.players;t.setState({players:a})})}},{key:"startGameHandler",value:function(){var e=this;this.client.startGame().then(function(t){e.props.onGameStart(t)})}},{key:"componentDidMount",value:function(){var e=this;this.client.addEventListener("LOBBY-UPDATE",function(t){e.setState({players:t.players})}),this.client.addEventListener("GAME-START",function(t){e.props.onGameStart(t)})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Estas en el lobby: - ",this.props.name,"!"),r.a.createElement(f,{players:this.state.players,onChooseRol:this.chooseRolHandler}),this.props.IamCreator&&r.a.createElement("button",{onClick:this.startGameHandler},"Start Game!"))}}]),t}(r.a.Component),C=(a(21),{r:"\u265c",n:"\u265e",b:"\u265d",q:"\u265b",k:"\u265a",p:"\u265f"}),E=function(e){function t(e){return Object(s.a)(this,t),Object(h.a)(this,Object(b.a)(t).call(this,e))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){for(var e=new Array(64),t=0;t<8;t++)for(var a=0;a<8;a++)e[8*t+a]=(a%2+t%2)%2?r.a.createElement("div",{class:"cell cellWhite",style:{gridColumn:"".concat(a+1,"/").concat(a+1),gridRow:"".concat(t+1,"/").concat(t+1)}}):r.a.createElement("div",{class:"cell cellBlack",style:{gridColumn:"".concat(a+1,"/").concat(a+1),gridRow:"".concat(t+1,"/").concat(t+1)}});var n=this.props.pieces.map(function(e){var t=e.square.charCodeAt(0)-"a".charCodeAt(0)+1,a="9".charCodeAt(0)-e.square.charCodeAt(1),n="b"===e.piece.color?"blackPiece":"whitePiece";return console.log(e.square,t,a),r.a.createElement("div",{class:n,style:{gridColumn:"".concat(t,"/").concat(t),gridRow:"".concat(a,"/").concat(a)}},C[e.piece.type])});return r.a.createElement("div",{class:"boardContainer"},r.a.createElement("div",{class:"chessBoard"},e,n))}}]),t}(r.a.Component),j=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).client=a.props.client,console.log(a.client),a.state={valueFrom:"",valueTo:"",gameState:a.props.initialGameState},a.handleChangeFrom=a.handleChangeFrom.bind(Object(m.a)(a)),a.handleChangeTo=a.handleChangeTo.bind(Object(m.a)(a)),a.handleMove=a.handleMove.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"handleChangeFrom",value:function(e){this.setState({valueFrom:e.target.value})}},{key:"handleChangeTo",value:function(e){this.setState({valueTo:e.target.value})}},{key:"handleMove",value:function(){var e=this;this.client.move({from:this.state.valueFrom,to:this.state.valueTo}).then(function(t){e.setState({gameState:t.gameState})})}},{key:"componentDidMount",value:function(){var e=this;this.client.addEventListener("MOVE",function(t){e.setState({gameState:t.gameState})})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(E,{pieces:this.state.gameState}),r.a.createElement("p",null,"Estas en el juego!"),r.a.createElement("label",null,"From",r.a.createElement("input",{type:"text",value:this.state.value,onChange:this.handleChangeFrom})),r.a.createElement("label",null,"To",r.a.createElement("input",{type:"text",value:this.state.value,onChange:this.handleChangeTo})),r.a.createElement("button",{onClick:this.handleMove},"pepe"))}}]),t}(r.a.Component),O=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={value:"",status:"registering"},a.handleRegister=a.handleRegister.bind(Object(m.a)(a)),a.handleCreateLobby=a.handleCreateLobby.bind(Object(m.a)(a)),a.handleJoinLobby=a.handleJoinLobby.bind(Object(m.a)(a)),a.handleGameStart=a.handleGameStart.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"handleRegister",value:function(e){var t=this;this.props.client.register(e).then(function(e){window.addEventListener("beforeunload",t.props.client.leave),"OK"===e&&t.setState({status:"looking"})}).catch(function(){})}},{key:"handleCreateLobby",value:function(e){var t=this;this.props.client.createLobby(e).then(function(a){t.setState({status:"hosting",lobbyName:e,lobbyInfo:a})}).catch(function(){})}},{key:"handleJoinLobby",value:function(e){var t=this;this.props.client.joinLobby(e).then(function(a){t.setState({status:"joined",lobbyName:e,lobbyInfo:a})}).catch(function(){})}},{key:"handleGameStart",value:function(e){console.log(e.gameState),this.setState({status:"playing",lobbyInfo:e})}},{key:"render",value:function(){switch(this.state.status){case"registering":return r.a.createElement(p,{onRegister:this.handleRegister});case"looking":return r.a.createElement(v,{onCreateLobby:this.handleCreateLobby,onJoinLobby:this.handleJoinLobby});case"hosting":return r.a.createElement(g,{onGameStart:this.handleGameStart,IamCreator:!0,client:this.props.client,name:this.state.lobbyName,lobbyInfo:this.state.lobbyInfo});case"joined":return r.a.createElement(g,{onGameStart:this.handleGameStart,IamCreator:!1,client:this.props.client,name:this.state.lobbyName,lobbyInfo:this.state.lobbyInfo});case"playing":return r.a.createElement(j,{client:this.props.client,players:this.state.lobbyInfo.players,initialGameState:this.state.lobbyInfo.gameState});default:return r.a.createElement("div",null,r.a.createElement("p",null,"Algo se rompio"))}}}]),t}(r.a.Component),S=a(11),k=a.n(S),L=a(12),R=new Proxy(a.n(L).a,{construct:function(e,t){var a=Object(n.a)(e,Object(l.a)(t));return a.state=function(){return a.SQUARES.map(function(e){return{square:e,piece:a.get(e)}}).filter(function(e){return null!==e.piece})},console.log("bablbalbla"),a}}),w=k()({url:"wss://umpire-chess.herokuapp.com/",WSConstructor:WebSocket,Game:R});c.a.render(r.a.createElement(O,{client:w}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.40985f91.chunk.js.map